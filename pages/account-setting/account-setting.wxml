<!-- pages/account-setting/account-setting.wxml -->

<toast wx:if="{{toastvalue.intro}}">
  <toast-input wx:if="{{toastvalue.intro}}" propname="intro" slot="container" bindconfirm="setPro"
    bindcancel='settoastprop' title="用一句话介绍你自己吧"></toast-input>
</toast>

<toast wx:if="{{toastvalue.nickName}}">
  <toast-input wx:if="{{toastvalue.nickName}}" propname="nickName" slot="container" bindconfirm="setPro"
    bindcancel='settoastprop' title="请输入你的名字"></toast-input>
</toast>

<block wx-if="{{ toastvalue.isLogin }}">
  <mp-cells>
    <mp-cell link hover value="头像" link url="/pages/index/index" bindtap="getImage">
      <image slot="footer" src="{{ userInfo.avatarUrl }}"></image>
    </mp-cell>
    <mp-cell link hover value="用户名">
      <text bindtap="settoastprop" data-propname="nickName" slot="footer" data-value="true">{{
        userInfo.nickName ? userInfo.nickName : "待完善"
      }}</text>
    </mp-cell>
    <mp-cell link hover value="介绍">
      <text bindtap="settoastprop" data-propname="intro" slot="footer" data-value="true">{{
        userInfo.intro ? userInfo.intro : "待完善"
      }}</text>
    </mp-cell>
  </mp-cells>
  <mp-cells title="   ">
    <mp-cell link hover value="性别" link url="/pages/index/index">
      <text slot="footer"></text>
      <picker slot="footer" mode="selector" range="{{genderlist}}" bindchange="bindSexChange">
        <view class="picker">{{ userInfo.gender == 1 ? "男" : "女" }}</view>
      </picker>
    </mp-cell>
    <mp-cell link hover value="生日">
      <picker slot="footer" mode="date" start="2015-09-01" end="{{ date }}" bindchange="bindDateChange">
        <view class="picker">{{
          userInfo.birth ? userInfo.birth : "待完善"
        }}</view>
      </picker>
    </mp-cell>
    <mp-cell value="地区" link hover>
      <text slot="footer">{{
        userInfo.country ? userInfo.country : "待完善"
      }}</text>
    </mp-cell>
  </mp-cells>
</block>
<button open-type="getUserInfo" wx-if="{{ !toastvalue.isLogin }}" bindgetuserinfo="getUserInfoHandle">
  点击登录
</button>